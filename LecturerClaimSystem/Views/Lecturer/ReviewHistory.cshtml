@model LecturerClaimSystem.Models.Claim
@{
    ViewData["Title"] = "Claim Review History";
}

<div class="container mt-4">
    <h2 class="mb-3">Review History for Claim #@Model.Id</h2>

    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Lecturer</dt>
                <dd class="col-sm-9">@Model.LecturerName (@Model.LecturerEmail)</dd>

                <dt class="col-sm-3">Hours Worked</dt>
                <dd class="col-sm-9">@Model.HoursWorked</dd>

                <dt class="col-sm-3">Hourly Rate</dt>
                <dd class="col-sm-9">@Model.HourlyRate</dd>

                <dt class="col-sm-3">Earnings</dt>
                <dd class="col-sm-9">@Model.CalculateEarnings()</dd>

                <dt class="col-sm-3">Status</dt>
                <dd class="col-sm-9">
                    <span class="badge
                        @(Model.Status == LecturerClaimSystem.Models.ClaimStatus.Pending ? "bg-warning text-dark" :
                                                    Model.Status == LecturerClaimSystem.Models.ClaimStatus.Verified ? "bg-info text-dark" :
                                                    Model.Status == LecturerClaimSystem.Models.ClaimStatus.Approved ? "bg-success" :
                                                    "bg-danger")">
                        @Model.Status
                    </span>
                </dd>
            </dl>
        </div>
    </div>

    <h4 class="mb-3">Reviews</h4>
    @if (Model.Reviews.Any())
    {
        <table class="table table-striped table-bordered shadow-sm">
            <thead class="table-dark">
                <tr>
                    <th>Date</th>
                    <th>Reviewer</th>
                    <th>Role</th>
                    <th>Decision</th>
                    <th>Comments</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var review in Model.Reviews)
                {
                    <tr>
                        <td>@review.ReviewDate.ToString("yyyy-MM-dd HH:mm")</td>
                        <td>@review.ReviewerName</td>
                        <td>@review.ReviewerRole</td>
                        <td>
                            <span class="badge
                                    @(review.Decision == LecturerClaimSystem.Models.ClaimStatus.Verified ? "bg-info text-dark" :
                                                                review.Decision == LecturerClaimSystem.Models.ClaimStatus.Approved ? "bg-success" :
                                                                review.Decision == LecturerClaimSystem.Models.ClaimStatus.Declined ? "bg-danger" :
                                                                "bg-warning text-dark")">
                                @review.Decision
                            </span>
                        </td>
                        <td>@review.Comments</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-secondary">No reviews yet for this claim.</div>
    }

    <a class="btn btn-secondary mt-3" asp-action="Dashboard">Back to Dashboard</a>
</div>